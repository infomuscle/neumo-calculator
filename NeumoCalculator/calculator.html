<html>
    <head>
        <meta charset="utf-8">
        <title>NeumoCalculator</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="calculator.css">
    </head>
    <body ontouchstart="">
        <div class="calculator-body d-flex flex-column justify-content-end h-100 p-3">

            <!-- CALCULATOR DISPLAY -->
            <div class="d-flex d-block justify-content-center" >
                <input type="text" class="calculator-display w-100 text-right" value="0" id="calculator-display" disabled/>
            </div>

            <!-- CALCULATOR BUTTONS -->
            <div class="d-flex d-block justify-content-between ">
                <button type="button" value="ac"class="btn btn-neumo" onclick="touchOperation(this.value)">AC</button>
                <button type="button" value="pm" class="btn btn-neumo" onclick="touchPlusMinus()">+/-</button>
                <button type="button" value="mod" class="btn btn-neumo" onclick="touchOperation(this.value)">%</button>
                <button type="button" value="div" class="btn btn-neumo" onclick="touchOperation(this.value)">&divide;</button>
            </div>
            <div class="d-flex d-block justify-content-between">
                <button type="button" value="7" class="btn btn-neumo" onclick="touchNumber(this.value)">7</button>
                <button type="button" value="8" class="btn btn-neumo" onclick="touchNumber(this.value)">8</button>
                <button type="button" value="9" class="btn btn-neumo" onclick="touchNumber(this.value)">9</button>
                <button type="button" value="mul" class="btn btn-neumo" onclick="touchOperation(this.value)">&times;</button>
            </div>
            <div class="d-flex d-block justify-content-between">
                <button type="button" value="4" class="btn btn-neumo" onclick="touchNumber(this.value)">4</button>
                <button type="button" value="5" class="btn btn-neumo" onclick="touchNumber(this.value)">5</button>
                <button type="button" value="6" class="btn btn-neumo" onclick="touchNumber(this.value)">6</button>
                <button type="button" value="sub" class="btn btn-neumo" onclick="touchOperation(this.value)">-</button>
            </div>
            <div class="d-flex d-block justify-content-between">
                <button type="button" value="1" class="btn btn-neumo" onclick="touchNumber(this.value)">1</button>
                <button type="button" value="2" class="btn btn-neumo" onclick="touchNumber(this.value)">2</button>
                <button type="button" value="3" class="btn btn-neumo" onclick="touchNumber(this.value)">3</button>
                <button type="button" value="add" class="btn btn-neumo" onclick="touchOperation(this.value)">+</button>
            </div>
            <div class="d-flex d-block justify-content-between">
                <button type="button" value="00" class="btn btn-neumo" onclick="touchNumber(this.value)">00</button>
                <button type="button" value="0" class="btn btn-neumo" onclick="touchNumber(this.value)">0</button>
                <button type="button" value="pnt" class="btn btn-neumo" onclick="touchOperation(this.value)">.</button>
                <button type="button" value="eql" class="btn btn-neumo" onclick="touchOperation(this.value)">=</button>
            </div>
        </div>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
        <script src="calculator.js"></script>
        <script>
            var display = document.getElementById("calculator-display");
            var result = "";
            var input1 = "";
            var input2 = "";
            var op = "";

            function touchNumber(val) {
                if (result !== "" && input1 !== "") {
                    initCalculator();
                }
                if (op === "") {
                    input1  += val;
                    updateDisplay(input1);
                } else {
                    input2 += val;
                    updateDisplay(input2);
                }

                log();

            }

            function touchOperation(val) {

                if (val === "ac") {
                    initCalculator();
                    updateDisplay(0);
                    log();
                    return;
                }

                if (val !== "eql") {
                    op = val;
                }

                if (input2 !== "") {
                    switch (op) {
                        case "add":
                            result = Number(input1) + Number(input2);
                            break;
                        case "sub":
                            result = Number(input1) - Number(input2);
                            break;
                        case "mul":
                            result = Number(input1) * Number(input2);
                            break;
                        case "div":
                            result = Number(input1) / Number(input2);
                            break;
                        case "mod":
                            result = Number(input1) % Number(input2);
                            break;
                        default:
                            break;
                    }
                }


                if (input1 !== "" && input2 !== "") {
                    updateDisplay(result);
                }

                if (input2 !== "" && val === "eql") {
                    op = "";
                    input1 = result;
                    input2 = "";
                } else if (input2 !== "") {
                    input1 = result;
                    input2 = "";
                }
                log();
            }

            function touchPlusMinus() {
                result = result * (-1);
                updateDisplay(result);
                log();
            }

            function updateDisplay(val) {
                display.value = String(val);
            }

            function initCalculator() {
                result = "";
                input1 = "";
                input2 = "";
                op = "";
            }

            function log() {
                console.log("result : " + result);
                console.log("input1 : " + input1);
                console.log("input2 : " + input2);
                console.log("op : " + op);
                console.log("------------------");
            }
        </script>
    </body>
</html>
